{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useLocation,useNavigate}from\"react-router-dom\";import\"./SeatSelection.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const seatLayout=[[\"A1\",\"A2\",\"A3\",\"A4\"],[\"B1\",\"B2\",\"B3\",\"B4\"],[\"C1\",\"C2\",\"C3\",\"C4\"],[\"D1\",\"D2\",\"D3\",\"D4\"],[\"E1\",\"E2\",\"E3\",\"E4\"],[\"F1\",\"F2\",\"F3\",\"F4\"],[\"G1\",\"G2\",\"G3\",\"G4\"]];function SeatSelection(){const location=useLocation();const navigate=useNavigate();const{bus}=location.state||{};const[selectedSeats,setSelectedSeats]=useState([]);const[bookedSeats,setBookedSeats]=useState([]);useEffect(()=>{const isLoggedIn=localStorage.getItem(\"user\");if(!isLoggedIn){alert(\"You must be logged in to book tickets.\");navigate(\"/login\",{state:{from:{pathname:\"/seats\",bus}}});}const stored=JSON.parse(localStorage.getItem(`bookedSeats_${bus===null||bus===void 0?void 0:bus.id}`))||[];setBookedSeats(stored);},[bus,navigate]);const toggleSeat=seat=>{if(bookedSeats.includes(seat))return;if(selectedSeats.includes(seat)){setSelectedSeats(selectedSeats.filter(s=>s!==seat));}else{if(selectedSeats.length>=4){alert(\"You can select a maximum of 4 seats.\");return;}setSelectedSeats([...selectedSeats,seat]);}};const handleBooking=()=>{const updated=[...bookedSeats,...selectedSeats];localStorage.setItem(`bookedSeats_${bus.id}`,JSON.stringify(updated));const ticketNumber=`${bus.id}-${selectedSeats.join(\"-\")}`;const totalAmount=selectedSeats.length*bus.price;navigate(\"/booking-success\",{state:{ticketNumber,amount:totalAmount,seats:selectedSeats,bus}});};if(!bus)return/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-5 text-danger\",children:\"Invalid bus selection\"});return/*#__PURE__*/_jsx(\"div\",{className:\"container my-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card shadow p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-success\",children:bus.company}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Route:\"}),\" \",bus.departCity,\" \\u2192 \",bus.arrivalCity]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",bus.departDate,\" | \",/*#__PURE__*/_jsx(\"strong\",{children:\"Coach No.:\"}),\" \",\"#\",bus.id]}),/*#__PURE__*/_jsx(\"div\",{className:\"seat-grid mb-4\",children:seatLayout.map((row,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"seat-row\",children:row.map(seat=>{const isBooked=bookedSeats.includes(seat);const isSelected=selectedSeats.includes(seat);return/*#__PURE__*/_jsx(\"button\",{className:`seat btn btn-sm me-1 mb-1 ${isBooked?\"btn-secondary\":isSelected?\"btn-success\":\"btn-outline-success\"}`,onClick:()=>toggleSeat(seat),disabled:isBooked,children:seat},seat);})},i))}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"strong\",{children:selectedSeats.length}),\" seat(s) selected \\u2013 Total:\",\" \",/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\u09F3\",selectedSeats.length*bus.price]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleBooking,disabled:selectedSeats.length===0,children:\"Confirm Booking\"})]})]})});}export default SeatSelection;","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","seatLayout","SeatSelection","location","navigate","bus","state","selectedSeats","setSelectedSeats","bookedSeats","setBookedSeats","isLoggedIn","localStorage","getItem","alert","from","pathname","stored","JSON","parse","id","toggleSeat","seat","includes","filter","s","length","handleBooking","updated","setItem","stringify","ticketNumber","join","totalAmount","price","amount","seats","className","children","company","departCity","arrivalCity","departDate","map","row","i","isBooked","isSelected","onClick","disabled"],"sources":["C:/Users/USER/Desktop/shozs/frontend/src/pages/SeatSelection.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport \"./SeatSelection.css\";\r\n\r\nconst seatLayout = [\r\n  [\"A1\", \"A2\", \"A3\", \"A4\"],\r\n  [\"B1\", \"B2\", \"B3\", \"B4\"],\r\n  [\"C1\", \"C2\", \"C3\", \"C4\"],\r\n  [\"D1\", \"D2\", \"D3\", \"D4\"],\r\n  [\"E1\", \"E2\", \"E3\", \"E4\"],\r\n  [\"F1\", \"F2\", \"F3\", \"F4\"],\r\n  [\"G1\", \"G2\", \"G3\", \"G4\"],\r\n];\r\n\r\nfunction SeatSelection() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { bus } = location.state || {};\r\n\r\n  const [selectedSeats, setSelectedSeats] = useState([]);\r\n  const [bookedSeats, setBookedSeats] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const isLoggedIn = localStorage.getItem(\"user\");\r\n    if (!isLoggedIn) {\r\n      alert(\"You must be logged in to book tickets.\");\r\n      navigate(\"/login\", {\r\n        state: { from: { pathname: \"/seats\", bus } },\r\n      });\r\n    }\r\n\r\n    const stored =\r\n      JSON.parse(localStorage.getItem(`bookedSeats_${bus?.id}`)) || [];\r\n    setBookedSeats(stored);\r\n  }, [bus, navigate]);\r\n\r\n  const toggleSeat = (seat) => {\r\n    if (bookedSeats.includes(seat)) return;\r\n\r\n    if (selectedSeats.includes(seat)) {\r\n      setSelectedSeats(selectedSeats.filter((s) => s !== seat));\r\n    } else {\r\n      if (selectedSeats.length >= 4) {\r\n        alert(\"You can select a maximum of 4 seats.\");\r\n        return;\r\n      }\r\n      setSelectedSeats([...selectedSeats, seat]);\r\n    }\r\n  };\r\n\r\n  const handleBooking = () => {\r\n    const updated = [...bookedSeats, ...selectedSeats];\r\n    localStorage.setItem(`bookedSeats_${bus.id}`, JSON.stringify(updated));\r\n\r\n    const ticketNumber = `${bus.id}-${selectedSeats.join(\"-\")}`;\r\n    const totalAmount = selectedSeats.length * bus.price;\r\n\r\n    navigate(\"/booking-success\", {\r\n      state: {\r\n        ticketNumber,\r\n        amount: totalAmount,\r\n        seats: selectedSeats,\r\n        bus,\r\n      },\r\n    });\r\n  };\r\n\r\n  if (!bus)\r\n    return (\r\n      <p className=\"text-center mt-5 text-danger\">Invalid bus selection</p>\r\n    );\r\n\r\n  return (\r\n    <div className=\"container my-5\">\r\n      <div className=\"card shadow p-4\">\r\n        <h3 className=\"text-success\">{bus.company}</h3>\r\n        <p className=\"mb-2\">\r\n          <strong>Route:</strong> {bus.departCity} → {bus.arrivalCity}\r\n        </p>\r\n        <p className=\"mb-3\">\r\n          <strong>Date:</strong> {bus.departDate} | <strong>Coach No.:</strong>{\" \"}\r\n          #{bus.id}\r\n        </p>\r\n\r\n        <div className=\"seat-grid mb-4\">\r\n          {seatLayout.map((row, i) => (\r\n            <div key={i} className=\"seat-row\">\r\n              {row.map((seat) => {\r\n                const isBooked = bookedSeats.includes(seat);\r\n                const isSelected = selectedSeats.includes(seat);\r\n                return (\r\n                  <button\r\n                    key={seat}\r\n                    className={`seat btn btn-sm me-1 mb-1 ${\r\n                      isBooked\r\n                        ? \"btn-secondary\"\r\n                        : isSelected\r\n                        ? \"btn-success\"\r\n                        : \"btn-outline-success\"\r\n                    }`}\r\n                    onClick={() => toggleSeat(seat)}\r\n                    disabled={isBooked}\r\n                  >\r\n                    {seat}\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"d-flex justify-content-between align-items-center\">\r\n          <p className=\"mb-0\">\r\n            <strong>{selectedSeats.length}</strong> seat(s) selected – Total:{\" \"}\r\n            <strong>৳{selectedSeats.length * bus.price}</strong>\r\n          </p>\r\n          <button\r\n            className=\"btn btn-primary\"\r\n            onClick={handleBooking}\r\n            disabled={selectedSeats.length === 0}\r\n          >\r\n            Confirm Booking\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SeatSelection;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CAC3D,MAAO,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE7B,KAAM,CAAAC,UAAU,CAAG,CACjB,CAAC,IAAI,CAAE,IAAI,CAAE,IAAI,CAAE,IAAI,CAAC,CACxB,CAAC,IAAI,CAAE,IAAI,CAAE,IAAI,CAAE,IAAI,CAAC,CACxB,CAAC,IAAI,CAAE,IAAI,CAAE,IAAI,CAAE,IAAI,CAAC,CACxB,CAAC,IAAI,CAAE,IAAI,CAAE,IAAI,CAAE,IAAI,CAAC,CACxB,CAAC,IAAI,CAAE,IAAI,CAAE,IAAI,CAAE,IAAI,CAAC,CACxB,CAAC,IAAI,CAAE,IAAI,CAAE,IAAI,CAAE,IAAI,CAAC,CACxB,CAAC,IAAI,CAAE,IAAI,CAAE,IAAI,CAAE,IAAI,CAAC,CACzB,CAED,QAAS,CAAAC,aAAaA,CAAA,CAAG,CACvB,KAAM,CAAAC,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAS,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAES,GAAI,CAAC,CAAGF,QAAQ,CAACG,KAAK,EAAI,CAAC,CAAC,CAEpC,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACe,WAAW,CAAEC,cAAc,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAElDD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAkB,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC/C,GAAI,CAACF,UAAU,CAAE,CACfG,KAAK,CAAC,wCAAwC,CAAC,CAC/CV,QAAQ,CAAC,QAAQ,CAAE,CACjBE,KAAK,CAAE,CAAES,IAAI,CAAE,CAAEC,QAAQ,CAAE,QAAQ,CAAEX,GAAI,CAAE,CAC7C,CAAC,CAAC,CACJ,CAEA,KAAM,CAAAY,MAAM,CACVC,IAAI,CAACC,KAAK,CAACP,YAAY,CAACC,OAAO,CAAC,eAAeR,GAAG,SAAHA,GAAG,iBAAHA,GAAG,CAAEe,EAAE,EAAE,CAAC,CAAC,EAAI,EAAE,CAClEV,cAAc,CAACO,MAAM,CAAC,CACxB,CAAC,CAAE,CAACZ,GAAG,CAAED,QAAQ,CAAC,CAAC,CAEnB,KAAM,CAAAiB,UAAU,CAAIC,IAAI,EAAK,CAC3B,GAAIb,WAAW,CAACc,QAAQ,CAACD,IAAI,CAAC,CAAE,OAEhC,GAAIf,aAAa,CAACgB,QAAQ,CAACD,IAAI,CAAC,CAAE,CAChCd,gBAAgB,CAACD,aAAa,CAACiB,MAAM,CAAEC,CAAC,EAAKA,CAAC,GAAKH,IAAI,CAAC,CAAC,CAC3D,CAAC,IAAM,CACL,GAAIf,aAAa,CAACmB,MAAM,EAAI,CAAC,CAAE,CAC7BZ,KAAK,CAAC,sCAAsC,CAAC,CAC7C,OACF,CACAN,gBAAgB,CAAC,CAAC,GAAGD,aAAa,CAAEe,IAAI,CAAC,CAAC,CAC5C,CACF,CAAC,CAED,KAAM,CAAAK,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAAAC,OAAO,CAAG,CAAC,GAAGnB,WAAW,CAAE,GAAGF,aAAa,CAAC,CAClDK,YAAY,CAACiB,OAAO,CAAC,eAAexB,GAAG,CAACe,EAAE,EAAE,CAAEF,IAAI,CAACY,SAAS,CAACF,OAAO,CAAC,CAAC,CAEtE,KAAM,CAAAG,YAAY,CAAG,GAAG1B,GAAG,CAACe,EAAE,IAAIb,aAAa,CAACyB,IAAI,CAAC,GAAG,CAAC,EAAE,CAC3D,KAAM,CAAAC,WAAW,CAAG1B,aAAa,CAACmB,MAAM,CAAGrB,GAAG,CAAC6B,KAAK,CAEpD9B,QAAQ,CAAC,kBAAkB,CAAE,CAC3BE,KAAK,CAAE,CACLyB,YAAY,CACZI,MAAM,CAAEF,WAAW,CACnBG,KAAK,CAAE7B,aAAa,CACpBF,GACF,CACF,CAAC,CAAC,CACJ,CAAC,CAED,GAAI,CAACA,GAAG,CACN,mBACEP,IAAA,MAAGuC,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CAAC,uBAAqB,CAAG,CAAC,CAGzE,mBACExC,IAAA,QAAKuC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC7BtC,KAAA,QAAKqC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BxC,IAAA,OAAIuC,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAEjC,GAAG,CAACkC,OAAO,CAAK,CAAC,cAC/CvC,KAAA,MAAGqC,SAAS,CAAC,MAAM,CAAAC,QAAA,eACjBxC,IAAA,WAAAwC,QAAA,CAAQ,QAAM,CAAQ,CAAC,IAAC,CAACjC,GAAG,CAACmC,UAAU,CAAC,UAAG,CAACnC,GAAG,CAACoC,WAAW,EAC1D,CAAC,cACJzC,KAAA,MAAGqC,SAAS,CAAC,MAAM,CAAAC,QAAA,eACjBxC,IAAA,WAAAwC,QAAA,CAAQ,OAAK,CAAQ,CAAC,IAAC,CAACjC,GAAG,CAACqC,UAAU,CAAC,KAAG,cAAA5C,IAAA,WAAAwC,QAAA,CAAQ,YAAU,CAAQ,CAAC,CAAC,GAAG,CAAC,GACzE,CAACjC,GAAG,CAACe,EAAE,EACP,CAAC,cAEJtB,IAAA,QAAKuC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAC5BrC,UAAU,CAAC0C,GAAG,CAAC,CAACC,GAAG,CAAEC,CAAC,gBACrB/C,IAAA,QAAauC,SAAS,CAAC,UAAU,CAAAC,QAAA,CAC9BM,GAAG,CAACD,GAAG,CAAErB,IAAI,EAAK,CACjB,KAAM,CAAAwB,QAAQ,CAAGrC,WAAW,CAACc,QAAQ,CAACD,IAAI,CAAC,CAC3C,KAAM,CAAAyB,UAAU,CAAGxC,aAAa,CAACgB,QAAQ,CAACD,IAAI,CAAC,CAC/C,mBACExB,IAAA,WAEEuC,SAAS,CAAE,6BACTS,QAAQ,CACJ,eAAe,CACfC,UAAU,CACV,aAAa,CACb,qBAAqB,EACxB,CACHC,OAAO,CAAEA,CAAA,GAAM3B,UAAU,CAACC,IAAI,CAAE,CAChC2B,QAAQ,CAAEH,QAAS,CAAAR,QAAA,CAElBhB,IAAI,EAXAA,IAYC,CAAC,CAEb,CAAC,CAAC,EApBMuB,CAqBL,CACN,CAAC,CACC,CAAC,cAEN7C,KAAA,QAAKqC,SAAS,CAAC,mDAAmD,CAAAC,QAAA,eAChEtC,KAAA,MAAGqC,SAAS,CAAC,MAAM,CAAAC,QAAA,eACjBxC,IAAA,WAAAwC,QAAA,CAAS/B,aAAa,CAACmB,MAAM,CAAS,CAAC,kCAA0B,CAAC,GAAG,cACrE1B,KAAA,WAAAsC,QAAA,EAAQ,QAAC,CAAC/B,aAAa,CAACmB,MAAM,CAAGrB,GAAG,CAAC6B,KAAK,EAAS,CAAC,EACnD,CAAC,cACJpC,IAAA,WACEuC,SAAS,CAAC,iBAAiB,CAC3BW,OAAO,CAAErB,aAAc,CACvBsB,QAAQ,CAAE1C,aAAa,CAACmB,MAAM,GAAK,CAAE,CAAAY,QAAA,CACtC,iBAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAEA,cAAe,CAAApC,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}